<!-- ========================================
     MÃ“DULO: SOLICITAR ENTREGA
     Para comercios-panel.html
     ======================================== -->

<div id="contentSolicitarEntrega" class="max-w-4xl mx-auto p-4">
  <!-- Selector de Tipo de Servicio -->
  <div class="bg-white rounded-2xl shadow-sm p-6 mb-6">
    <h2 class="text-2xl font-bold mb-4">Solicitar Entrega</h2>
    <p class="text-gray-600 mb-6">Selecciona el tipo de servicio que necesitas:</p>
    
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <!-- Traslado entre Tiendas -->
      <label class="relative cursor-pointer">
        <input type="radio" name="tipoServicioEntrega" value="TRASLADO_TIENDAS" class="peer sr-only" checked>
        <div class="border-2 border-gray-200 rounded-xl p-6 text-center peer-checked:border-brand-orange peer-checked:bg-orange-50 transition hover:shadow-md">
          <div class="text-5xl mb-3">ğŸª</div>
          <h3 class="font-bold text-lg mb-2">Traslado</h3>
          <p class="text-sm text-gray-600">Entre mis tiendas</p>
        </div>
      </label>

      <!-- Recoger Paquete -->
      <label class="relative cursor-pointer">
        <input type="radio" name="tipoServicioEntrega" value="RECOGER_PAQUETE" class="peer sr-only">
        <div class="border-2 border-gray-200 rounded-xl p-6 text-center peer-checked:border-brand-orange peer-checked:bg-orange-50 transition hover:shadow-md">
          <div class="text-5xl mb-3">ğŸ“¦</div>
          <h3 class="font-bold text-lg mb-2">Recoger</h3>
          <p class="text-sm text-gray-600">Un paquete</p>
        </div>
      </label>

      <!-- Realizar Compra -->
      <label class="relative cursor-pointer">
        <input type="radio" name="tipoServicioEntrega" value="REALIZAR_COMPRA" class="peer sr-only">
        <div class="border-2 border-gray-200 rounded-xl p-6 text-center peer-checked:border-brand-orange peer-checked:bg-orange-50 transition hover:shadow-md">
          <div class="text-5xl mb-3">ğŸ›’</div>
          <h3 class="font-bold text-lg mb-2">Compra</h3>
          <p class="text-sm text-gray-600">Por encargo</p>
        </div>
      </label>
    </div>
  </div>

  <!-- Formulario de Solicitud -->
  <form id="formSolicitarEntrega" class="bg-white rounded-2xl shadow-sm p-6">
    
    <!-- SECCIÃ“N: TRASLADO ENTRE TIENDAS -->
    <div id="seccionTrasladoTiendas" class="form-section">
      <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
        <span>ğŸª</span> Traslado entre Tiendas
      </h3>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <!-- Tienda Origen -->
        <div>
          <label class="block font-semibold mb-2 text-sm text-gray-700">Tienda Origen *</label>
          <select id="tiendaOrigen" required class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-brand-orange focus:outline-none transition">
            <option value="">Selecciona tienda</option>
            <option value="tienda1" data-gps="15.6100,-87.9533">Tienda Principal - Choloma</option>
            <option value="tienda2" data-gps="15.5000,-88.0300">Sucursal SPS - San Pedro Sula</option>
            <option value="tienda3" data-gps="14.0800,-87.2100">Bodega Central - Tegucigalpa</option>
          </select>
        </div>

        <!-- Tienda Destino -->
        <div>
          <label class="block font-semibold mb-2 text-sm text-gray-700">Tienda Destino *</label>
          <select id="tiendaDestino" required class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-brand-orange focus:outline-none transition">
            <option value="">Selecciona tienda</option>
            <option value="tienda1" data-gps="15.6100,-87.9533">Tienda Principal - Choloma</option>
            <option value="tienda2" data-gps="15.5000,-88.0300">Sucursal SPS - San Pedro Sula</option>
            <option value="tienda3" data-gps="14.0800,-87.2100">Bodega Central - Tegucigalpa</option>
          </select>
        </div>
      </div>
    </div>

    <!-- SECCIÃ“N: RECOGER PAQUETE -->
    <div id="seccionRecogerPaquete" class="form-section hidden">
      <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
        <span>ğŸ“¦</span> Recoger Paquete
      </h3>

      <div class="mb-4">
        <label class="block font-semibold mb-2 text-sm text-gray-700">UbicaciÃ³n de Recogida *</label>
        <div class="flex gap-2 mb-2">
          <input type="text" id="ubicacionRecogidaPaquete" placeholder="Pega las coordenadas: 15.6100,-87.9533" required class="flex-1 border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-brand-orange focus:outline-none transition">
          <button type="button" id="btnMapaRecogidaPaquete" class="bg-blue-500 text-white px-6 rounded-xl font-semibold hover:bg-blue-600 transition">
            ğŸ—ºï¸ Mapa
          </button>
        </div>
        <p class="text-xs text-gray-500">TambiÃ©n puedes usar el mapa interactivo</p>
      </div>

      <div class="mb-4">
        <label class="block font-semibold mb-2 text-sm text-gray-700">Nombre del Contacto *</label>
        <input type="text" id="nombreContactoRecogida" placeholder="Persona que entrega el paquete" required class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-brand-orange focus:outline-none transition">
      </div>

      <div class="mb-4">
        <label class="block font-semibold mb-2 text-sm text-gray-700">TelÃ©fono del Contacto *</label>
        <input type="tel" id="telefonoContactoRecogida" placeholder="+504 9999-9999" required class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-brand-orange focus:outline-none transition">
      </div>

      <div class="mb-4">
        <label class="block font-semibold mb-2 text-sm text-gray-700">Â¿DÃ³nde entregar el paquete? *</label>
        <select id="destinoPaquete" required class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-brand-orange focus:outline-none transition">
          <option value="">Selecciona destino</option>
          <option value="tienda1" data-gps="15.6100,-87.9533">Mi Tienda Principal - Choloma</option>
          <option value="tienda2" data-gps="15.5000,-88.0300">Sucursal SPS - San Pedro Sula</option>
          <option value="tienda3" data-gps="14.0800,-87.2100">Bodega Central - Tegucigalpa</option>
          <option value="otra">Otra ubicaciÃ³n</option>
        </select>
      </div>

      <div id="otraUbicacionDestino" class="hidden mb-4">
        <label class="block font-semibold mb-2 text-sm text-gray-700">UbicaciÃ³n de Entrega</label>
        <input type="text" id="ubicacionEntregaOtra" placeholder="Coordenadas: 15.6100,-87.9533" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-brand-orange focus:outline-none transition">
      </div>
    </div>

    <!-- SECCIÃ“N: REALIZAR COMPRA -->
    <div id="seccionRealizarCompra" class="form-section hidden">
      <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
        <span>ğŸ›’</span> Realizar Compra por Encargo
      </h3>

      <div class="bg-blue-50 border-l-4 border-blue-400 p-4 rounded-lg mb-4">
        <p class="text-sm text-blue-800">
          <span class="font-bold">ğŸ“ Nota:</span> Nuestro delivery irÃ¡ al comercio indicado, comprarÃ¡ los productos que solicites y te los entregarÃ¡. Se cobrarÃ¡ el costo de los productos + tarifa de envÃ­o + comisiÃ³n de servicio.
        </p>
      </div>

      <div class="mb-4">
        <label class="block font-semibold mb-2 text-sm text-gray-700">Â¿DÃ³nde realizar la compra? *</label>
        <input type="text" id="nombreComercioCompra" placeholder="Ej: Supermercado La Colonia" required class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-brand-orange focus:outline-none transition">
      </div>

      <div class="mb-4">
        <label class="block font-semibold mb-2 text-sm text-gray-700">UbicaciÃ³n del Comercio *</label>
        <input type="text" id="ubicacionComercioCompra" placeholder="Coordenadas: 15.6100,-87.9533" required class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-brand-orange focus:outline-none transition">
      </div>

      <div class="mb-4">
        <label class="block font-semibold mb-2 text-sm text-gray-700">Lista de Productos a Comprar *</label>
        <textarea id="listaProductosCompra" required class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-brand-orange focus:outline-none transition" rows="4" placeholder="Ejemplo:
- 2 kg de arroz
- 1 litro de aceite vegetal
- 500g de frijoles negros"></textarea>
      </div>

      <div class="mb-4">
        <label class="block font-semibold mb-2 text-sm text-gray-700">Presupuesto Aproximado (L.) *</label>
        <input type="number" id="presupuestoCompra" placeholder="0.00" required class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-brand-orange focus:outline-none transition" min="0" step="0.01">
        <p class="text-xs text-gray-500 mt-1">Monto estimado para la compra (no incluye envÃ­o ni comisiÃ³n)</p>
      </div>

      <div class="mb-4">
        <label class="block font-semibold mb-2 text-sm text-gray-700">Â¿DÃ³nde entregar la compra? *</label>
        <select id="destinoCompra" required class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-brand-orange focus:outline-none transition">
          <option value="">Selecciona destino</option>
          <option value="tienda1" data-gps="15.6100,-87.9533">Mi Tienda Principal - Choloma</option>
          <option value="tienda2" data-gps="15.5000,-88.0300">Sucursal SPS - San Pedro Sula</option>
          <option value="tienda3" data-gps="14.0800,-87.2100">Bodega Central - Tegucigalpa</option>
        </select>
      </div>
    </div>

    <!-- SECCIÃ“N COMÃšN: DescripciÃ³n del Contenido -->
    <div class="mb-4 mt-6 pt-6 border-t">
      <label class="block font-semibold mb-2 text-sm text-gray-700">DescripciÃ³n del Contenido *</label>
      <textarea id="descripcionContenido" required class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-brand-orange focus:outline-none transition" rows="3" placeholder="Describe quÃ© se va a trasladar/recoger"></textarea>
    </div>

    <!-- Foto Opcional -->
    <div class="mb-4">
      <label class="block font-semibold mb-2 text-sm text-gray-700">ğŸ“¸ Foto del Paquete (Opcional)</label>
      <div class="border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-brand-orange transition cursor-pointer" id="uploadAreaEntrega">
        <input type="file" id="fotoEntrega" accept="image/*" class="hidden">
        <div id="uploadPlaceholderEntrega">
          <div class="text-5xl mb-2">ğŸ“¸</div>
          <p class="text-sm text-gray-600 font-semibold">Click para subir foto</p>
          <p class="text-xs text-gray-500 mt-1">JPG, PNG (mÃ¡x. 5MB)</p>
        </div>
        <div id="uploadPreviewEntrega" class="hidden">
          <img id="previewImgEntrega" class="mx-auto max-h-40 rounded-lg mb-2">
          <p class="text-sm text-green-600 font-semibold">âœ“ Foto cargada</p>
          <button type="button" id="removeFotoEntrega" class="text-xs text-red-500 hover:text-red-700 mt-2">Cambiar imagen</button>
        </div>
      </div>
    </div>

    <!-- MÃ©todo de Pago -->
    <div class="mb-4">
      <label class="block font-semibold mb-3 text-gray-700">ğŸ’³ MÃ©todo de Pago del EnvÃ­o *</label>
      <div class="grid grid-cols-2 gap-3">
        <label class="relative cursor-pointer">
          <input type="radio" name="metodoPagoEntrega" value="EFECTIVO" class="peer sr-only" checked>
          <div class="border-2 border-gray-200 rounded-xl p-4 text-center peer-checked:border-brand-orange peer-checked:bg-orange-50 transition">
            <div class="text-2xl mb-1">ğŸ’µ</div>
            <div class="font-semibold">Efectivo</div>
          </div>
        </label>
        <label class="relative cursor-pointer">
          <input type="radio" name="metodoPagoEntrega" value="TRANSFERENCIA" class="peer sr-only">
          <div class="border-2 border-gray-200 rounded-xl p-4 text-center peer-checked:border-brand-orange peer-checked:bg-orange-50 transition">
            <div class="text-2xl mb-1">ğŸ¦</div>
            <div class="font-semibold">Transferencia</div>
          </div>
        </label>
      </div>
    </div>

    <!-- Notas Adicionales -->
    <div class="mb-6">
      <label class="block font-semibold mb-2 text-sm text-gray-700">ğŸ“ Notas Adicionales (Opcional)</label>
      <textarea id="notasAdicionalesEntrega" class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-brand-orange focus:outline-none transition" rows="2" placeholder="Instrucciones especiales, horarios preferidos, etc."></textarea>
    </div>

    <!-- Resumen de Tarifa -->
    <div id="resumenTarifaEntrega" class="hidden mb-6 p-4 bg-blue-50 border-2 border-blue-200 rounded-xl">
      <h3 class="font-bold mb-3 flex items-center gap-2">
        ğŸ’° Estimado de Costo
        <span id="modoNocturnoIndicadorEntrega" class="hidden text-xs bg-purple-600 text-white px-2 py-1 rounded-full">ğŸŒ™ Modo Nocturno</span>
      </h3>
      <div class="space-y-2 text-sm">
        <div class="flex justify-between">
          <span class="text-gray-700">Distancia:</span>
          <span class="font-semibold" id="distanciaKmEntrega">-</span>
        </div>
        <div class="flex justify-between">
          <span class="text-gray-700">Tarifa Base:</span>
          <span class="font-semibold">L.<span id="tarifaBaseEntrega">0.00</span></span>
        </div>
        <div id="recargoNocturnoRowEntrega" class="hidden flex justify-between text-purple-700">
          <span class="font-semibold">ğŸŒ™ Recargo Nocturno:</span>
          <span class="font-bold">+L.<span id="tarifaRecargoNocturnoEntrega">0.00</span></span>
        </div>
        <div id="comisionCompraRow" class="hidden flex justify-between text-green-700">
          <span class="font-semibold">ğŸ›’ ComisiÃ³n de compra (10%):</span>
          <span class="font-bold">+L.<span id="comisionCompra">0.00</span></span>
        </div>
        <div class="flex justify-between border-t pt-2 mt-2">
          <span class="text-gray-700 font-bold">Total Estimado:</span>
          <span class="font-bold text-lg brand-orange">L.<span id="tarifaTotalEntrega">0.00</span></span>
        </div>
      </div>
    </div>

    <!-- Botones -->
    <div class="flex gap-3">
      <button type="button" id="cancelarSolicitudEntrega" class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-4 rounded-xl font-bold transition">
        Cancelar
      </button>
      <button type="submit" class="flex-1 bg-brand-orange text-white py-4 rounded-xl font-bold text-lg hover:bg-orange-600 transition shadow-lg">
        ğŸš€ Solicitar Entrega
      </button>
    </div>
  </form>
</div>

<!-- Styles especÃ­ficos del mÃ³dulo (inline) -->
<style>
  .form-section.hidden {
    display: none;
  }
  
  .brand-orange {
    color: #FF8C00;
  }
  
  .bg-brand-orange {
    background-color: #FF8C00;
  }
  
  #contentSolicitarEntrega .fade-in {
    animation: fadeIn 0.4s ease-in;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>